#ddev-generated
hooks:
  pre-start:
    - exec-host: "cp .ddev/settings.local.devmode.php ${DDEV_APPROOT}/${DDEV_DOCROOT}/sites/default/settings.local.php"
    - exec-host: "cp .ddev/scripts/git-hooks/commit-msg .git/hooks/commit-msg"
    - exec-host: "chmod +x .git/hooks/commit-msg"
  post-start:
    - exec-host: "if [ ! $ANNERTECH_LOCAL_DEV ]; then ddev auth ssh; fi"
    - exec-host: "ddev check-annertech-ddev"
  post-import-db:
    - exec: "drush cache:rebuild"
    - exec: "drush sql:sanitize -y"
    - exec: "if [[ $(grep 'stage_file_proxy' composer.json) ]]; then drush en stage_file_proxy -y; fi"
    - exec: "drush user:login"
  pre-pull:
    - exec: "echo 'Starting DB pull from upstream'"
  post-pull:
    - exec: "echo 'Removing temporary files'"
    - exec: "rm .ddev/.downloads/*.sql.gz"
    - exec: "echo 'Temporary files removed'"
    - exec: "echo 'Consider taking a snapshot of the freshly downloaded database with \"ddev snapshot --name fresh\"'"
